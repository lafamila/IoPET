<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Chat</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.8/socket.io.min.js"></script>
	</head>
	<body>
		<script>
			$(document).ready(function(){
				var socket = io.connect(window.location.origin);
				socket.on('connect', function(){

					var msg = {
						type: "connect",
						id:   {{hospt_id}}
					};
					socket.send(JSON.stringify(msg));
				});
		
				socket.on('hello', function(msg){
					$('#messages').append('<li>' +'>>Other :'+ msg + '</li>');
				});

				socket.on('message', function(msg){
					console.log(msg);
					console.log(typeof msg);
					if(msg.type === 'normal'){
						$('#messages').append('>> '+msg.message+'<br>');
					}
					else{
						$('#messages').append('<li>' + msg.message + '</li>');
					}
				});



				$('#sendButton').on('click', function(){
					socket.send($('#myMessage').val());
					$('#myMessage').val('');
				});
			});
		</script>



		<ul id="messages"></ul>
		<input type="text" id="myMessage"><button id="sendButton">SEND</button>
	

	</body>
</html>
